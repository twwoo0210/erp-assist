{"version":3,"file":"page-DPnjw_LX.js","sources":["../../src/pages/settings/page.tsx"],"sourcesContent":["\nimport { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { createClient } from '@supabase/supabase-js';\n\nconst supabase = createClient(\n  import.meta.env.VITE_PUBLIC_SUPABASE_URL,\n  import.meta.env.VITE_PUBLIC_SUPABASE_ANON_KEY\n);\n\ninterface ConnectionStatus {\n  isConnected: boolean;\n  lastSync: string | null;\n  itemCount: number;\n  customerCount: number;\n}\n\nexport default function SettingsPage() {\n  const navigate = useNavigate();\n  const [activeTab, setActiveTab] = useState('ecount');\n  const [isLoading, setIsLoading] = useState(false);\n  const [user, setUser] = useState<any>(null);\n  const [profile, setProfile] = useState<any>(null);\n  const [connectionStatus, setConnectionStatus] = useState<ConnectionStatus>({\n    isConnected: false,\n    lastSync: null,\n    itemCount: 0,\n    customerCount: 0\n  });\n\n  const [ecountSettings, setEcountSettings] = useState({\n    zoneId: '',\n    comCode: '',\n    apiKey: ''\n  });\n\n  const [organizationInfo, setOrganizationInfo] = useState({\n    companyName: '',\n    adminEmail: '',\n    phoneNumber: ''\n  });\n\n  useEffect(() => {\n    // SEO용 동적 메타데이터 설정\n    document.title = 'ERP Assist 설정 - 이카운트 연동 및 회사 정보 관리';\n    \n    const metaDescription = document.querySelector('meta[name=\"description\"]');\n    if (metaDescription) {\n      metaDescription.setAttribute('content', '이카운트 ERP 연동 설정, 회사 정보 관리, 사용자 권한 설정을 한 곳에서 관리하세요. 안전하고 간편한 API 연동을 지원합니다.');\n    }\n\n    // Schema.org JSON-LD 추가\n    const script = document.createElement('script');\n    script.type = 'application/ld+json';\n    script.textContent = JSON.stringify({\n      \"@context\": \"https://schema.org\",\n      \"@type\": \"WebPage\",\n      \"name\": \"ERP Assist 설정\",\n      \"description\": \"이카운트 ERP 연동 설정 및 회사 정보 관리\",\n      \"url\": `${import.meta.env.VITE_SITE_URL || 'https://example.com'}/settings`,\n      \"isPartOf\": {\n        \"@type\": \"WebSite\",\n        \"name\": \"ERP Assist\",\n        \"url\": `${import.meta.env.VITE_SITE_URL || 'https://example.com'}`\n      }\n    });\n    document.head.appendChild(script);\n\n    const checkUser = async () => {\n      const { data: { user } } = await supabase.auth.getUser();\n      setUser(user);\n      \n      if (!user) {\n        navigate('/');\n        return;\n      }\n\n      // 프로필 및 조직 정보 가져오기\n      const { data: profileData } = await supabase\n        .from('profiles')\n        .select('*, organizations(*)')\n        .eq('id', user.id)\n        .single();\n\n      if (profileData) {\n        setProfile(profileData);\n        \n        if (profileData.organizations) {\n          const org = profileData.organizations;\n          setOrganizationInfo({\n            companyName: org.company_name || '',\n            adminEmail: org.admin_email || '',\n            phoneNumber: org.phone_number || ''\n          });\n          \n          setEcountSettings({\n            zoneId: org.ecount_zone_id || '',\n            comCode: org.ecount_com_code || '',\n            apiKey: org.ecount_api_key || ''\n          });\n\n          // 마스터 데이터 개수 확인\n          const { data: masters } = await supabase\n            .from('cached_masters')\n            .select('type')\n            .eq('organization_id', org.id);\n\n          if (masters) {\n            const itemCount = masters.filter(m => m.type === 'item').length;\n            const customerCount = masters.filter(m => m.type === 'customer').length;\n            \n            setConnectionStatus({\n              isConnected: itemCount > 0 || customerCount > 0,\n              lastSync: org.updated_at ? new Date(org.updated_at).toLocaleString() : null,\n              itemCount,\n              customerCount\n            });\n          }\n        }\n      }\n    };\n    \n    checkUser();\n\n    return () => {\n      const existingScript = document.querySelector('script[type=\"application/ld+json\"]');\n      if (existingScript) {\n        document.head.removeChild(existingScript);\n      }\n    };\n  }, [navigate]);\n\n  const handleEcountSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n    \n    try {\n      if (!profile?.organizations) {\n        throw new Error('조직 정보를 찾을 수 없습니다.');\n      }\n\n      // 조직 정보 업데이트\n      const { error } = await supabase\n        .from('organizations')\n        .update({\n          ecount_zone_id: ecountSettings.zoneId,\n          ecount_com_code: ecountSettings.comCode,\n          ecount_api_key: ecountSettings.apiKey,\n          updated_at: new Date().toISOString()\n        })\n        .eq('id', profile.organizations.id);\n\n      if (error) {\n        throw new Error(error.message);\n      }\n\n      // 마스터 동기화 호출\n      await handleSync();\n      \n      alert('이카운트 API 연결이 성공적으로 완료되었습니다!');\n    } catch (error: any) {\n      alert(`연결에 실패했습니다: ${error.message}`);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleSync = async () => {\n    setIsLoading(true);\n    \n    try {\n      const { data: { session } } = await supabase.auth.getSession();\n      if (!session) {\n        throw new Error('로그인이 필요합니다.');\n      }\n\n      const response = await fetch(`${import.meta.env.VITE_PUBLIC_SUPABASE_URL}/functions/v1/ecount-sync`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${session.access_token}`,\n        },\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || '동기화에 실패했습니다.');\n      }\n\n      const result = await response.json();\n      \n      setConnectionStatus({\n        isConnected: true,\n        lastSync: new Date().toLocaleString(),\n        itemCount: result.itemCount,\n        customerCount: result.customerCount\n      });\n      \n      alert('마스터 데이터 동기화가 완료되었습니다.');\n    } catch (error: any) {\n      alert(`동기화에 실패했습니다: ${error.message}`);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleOrganizationSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    try {\n      if (!profile?.organizations) {\n        throw new Error('조직 정보를 찾을 수 없습니다.');\n      }\n\n      const { error } = await supabase\n        .from('organizations')\n        .update({\n          company_name: organizationInfo.companyName,\n          admin_email: organizationInfo.adminEmail,\n          phone_number: organizationInfo.phoneNumber,\n          updated_at: new Date().toISOString()\n        })\n        .eq('id', profile.organizations.id);\n\n      if (error) {\n        throw new Error(error.message);\n      }\n\n      alert('회사 정보가 저장되었습니다.');\n    } catch (error: any) {\n      alert(`저장에 실패했습니다: ${error.message}`);\n    }\n  };\n\n  if (!user) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">로그인 확인 중...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <header className=\"bg-white shadow-sm border-b\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center h-16\">\n            <div className=\"flex items-center space-x-4\">\n              <button \n                onClick={() => navigate('/dashboard')}\n                className=\"text-gray-600 hover:text-gray-900 cursor-pointer\"\n              >\n                <i className=\"ri-arrow-left-line text-xl\"></i>\n              </button>\n              <h1 className=\"text-xl font-semibold text-gray-900\">설정</h1>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Tab Navigation */}\n        <div className=\"mb-8\">\n          <div className=\"border-b border-gray-200\">\n            <nav className=\"-mb-px flex space-x-8\">\n              <button\n                onClick={() => setActiveTab('ecount')}\n                className={`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap cursor-pointer ${\n                  activeTab === 'ecount'\n                    ? 'border-blue-500 text-blue-600'\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                }`}\n              >\n                이카운트 연동\n              </button>\n              <button\n                onClick={() => setActiveTab('organization')}\n                className={`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap cursor-pointer ${\n                  activeTab === 'organization'\n                    ? 'border-blue-500 text-blue-600'\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                }`}\n              >\n                회사 정보\n              </button>\n              <button\n                onClick={() => setActiveTab('users')}\n                className={`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap cursor-pointer ${\n                  activeTab === 'users'\n                    ? 'border-blue-500 text-blue-600'\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                }`}\n              >\n                사용자 관리\n              </button>\n            </nav>\n          </div>\n        </div>\n\n        {/* Ecount Integration Tab */}\n        {activeTab === 'ecount' && (\n          <div className=\"space-y-6\">\n            {/* Connection Status */}\n            <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">연결 상태</h3>\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center space-x-3\">\n                  <div className={`w-3 h-3 rounded-full ${connectionStatus.isConnected ? 'bg-green-500' : 'bg-red-500'}`}></div>\n                  <span className={`font-medium ${connectionStatus.isConnected ? 'text-green-700' : 'text-red-700'}`}>\n                    {connectionStatus.isConnected ? '연결됨' : '연결 안됨'}\n                  </span>\n                </div>\n                {connectionStatus.isConnected && (\n                  <button\n                    onClick={handleSync}\n                    disabled={isLoading}\n                    className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer whitespace-nowrap\"\n                  >\n                    {isLoading ? '동기화중...' : '마스터 동기화'}\n                  </button>\n                )}\n              </div>\n              \n              {connectionStatus.isConnected && (\n                <div className=\"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4\">\n                  <div className=\"bg-gray-50 rounded-lg p-4\">\n                    <p className=\"text-sm text-gray-600\">마지막 동기화</p>\n                    <p className=\"font-medium text-gray-900\">{connectionStatus.lastSync}</p>\n                  </div>\n                  <div className=\"bg-gray-50 rounded-lg p-4\">\n                    <p className=\"text-sm text-gray-600\">품목 수</p>\n                    <p className=\"font-medium text-gray-900\">{connectionStatus.itemCount.toLocaleString()}개</p>\n                  </div>\n                  <div className=\"bg-gray-50 rounded-lg p-4\">\n                    <p className=\"text-sm text-gray-600\">거래처 수</p>\n                    <p className=\"font-medium text-gray-900\">{connectionStatus.customerCount}개</p>\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {/* API Settings Form */}\n            <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">이카운트 API 설정</h3>\n              <form onSubmit={handleEcountSubmit} className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    ZONE ID <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={ecountSettings.zoneId}\n                    onChange={(e) => setEcountSettings(prev => ({ ...prev, zoneId: e.target.value }))}\n                    placeholder=\"예: zone01\"\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    required\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    회사 코드 (COM_CODE) <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={ecountSettings.comCode}\n                    onChange={(e) => setEcountSettings(prev => ({ ...prev, comCode: e.target.value }))}\n                    placeholder=\"예: COM001\"\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    required\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    API 키 <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"password\"\n                    value={ecountSettings.apiKey}\n                    onChange={(e) => setEcountSettings(prev => ({ ...prev, apiKey: e.target.value }))}\n                    placeholder=\"이카운트에서 발급받은 API 키를 입력하세요\"\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    required\n                  />\n                </div>\n\n                <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                  <div className=\"flex\">\n                    <i className=\"ri-information-line text-blue-600 text-lg mr-2 mt-0.5\"></i>\n                    <div className=\"text-sm text-blue-800\">\n                      <p className=\"font-medium mb-1\">API 키 발급 방법:</p>\n                      <ol className=\"list-decimal list-inside space-y-1\">\n                        <li>이카운트 ERP 로그인</li>\n                        <li>시스템관리 &gt; API관리 &gt; OPEN API 설정</li>\n                        <li>API 키 발급 후 위에 입력</li>\n                      </ol>\n                    </div>\n                  </div>\n                </div>\n\n                <button\n                  type=\"submit\"\n                  disabled={isLoading}\n                  className=\"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer whitespace-nowrap\"\n                >\n                  {isLoading ? '연결 테스트 중...' : '저장 및 연결 테스트'}\n                </button>\n              </form>\n            </div>\n          </div>\n        )}\n\n        {/* Organization Tab */}\n        {activeTab === 'organization' && (\n          <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">회사 정보</h3>\n            <form onSubmit={handleOrganizationSubmit} className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">회사명</label>\n                <input\n                  type=\"text\"\n                  value={organizationInfo.companyName}\n                  onChange={(e) => setOrganizationInfo(prev => ({ ...prev, companyName: e.target.value }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">관리자 이메일</label>\n                <input\n                  type=\"email\"\n                  value={organizationInfo.adminEmail}\n                  onChange={(e) => setOrganizationInfo(prev => ({ ...prev, adminEmail: e.target.value }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">연락처</label>\n                <input\n                  type=\"tel\"\n                  value={organizationInfo.phoneNumber}\n                  onChange={(e) => setOrganizationInfo(prev => ({ ...prev, phoneNumber: e.target.value }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n              </div>\n\n              <button\n                type=\"submit\"\n                className=\"bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 cursor-pointer whitespace-nowrap\"\n              >\n                저장\n              </button>\n            </form>\n          </div>\n        )}\n\n        {/* Users Tab */}\n        {activeTab === 'users' && (\n          <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">사용자 관리</h3>\n              <button className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 cursor-pointer whitespace-nowrap\">\n                사용자 초대\n              </button>\n            </div>\n\n            <div className=\"space-y-4\">\n              {profile && (\n                <div className=\"flex items-center justify-between p-4 border border-gray-200 rounded-lg\">\n                  <div className=\"flex items-center space-x-3\">\n                    <div className=\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center\">\n                      <i className=\"ri-user-line text-blue-600\"></i>\n                    </div>\n                    <div>\n                      <p className=\"font-medium text-gray-900\">{profile.full_name || '사용자'}</p>\n                      <p className=\"text-sm text-gray-600\">{profile.email}</p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <span className={`px-2 py-1 text-xs rounded-full ${\n                      profile.role === 'admin' \n                        ? 'bg-green-100 text-green-800' \n                        : 'bg-blue-100 text-blue-800'\n                    }`}>\n                      {profile.role === 'admin' ? '관리자' : '멤버'}\n                    </span>\n                    <button className=\"text-gray-400 hover:text-gray-600 cursor-pointer\">\n                      <i className=\"ri-more-2-line\"></i>\n                    </button>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":["supabase","createClient","SettingsPage","navigate","useNavigate","activeTab","setActiveTab","useState","isLoading","setIsLoading","user","setUser","profile","setProfile","connectionStatus","setConnectionStatus","ecountSettings","setEcountSettings","organizationInfo","setOrganizationInfo","useEffect","metaDescription","script","profileData","org","masters","itemCount","m","customerCount","existingScript","handleEcountSubmit","e","error","handleSync","session","response","errorData","result","handleOrganizationSubmit","jsxs","jsx","prev"],"mappings":"6DAKA,MAAMA,EAAWC,EACf,2CACA,gDACF,EASA,SAAwBC,GAAe,CACrC,MAAMC,EAAWC,EAAA,EACX,CAACC,EAAWC,CAAY,EAAIC,EAAAA,SAAS,QAAQ,EAC7C,CAACC,EAAWC,CAAY,EAAIF,EAAAA,SAAS,EAAK,EAC1C,CAACG,EAAMC,CAAO,EAAIJ,EAAAA,SAAc,IAAI,EACpC,CAACK,EAASC,CAAU,EAAIN,EAAAA,SAAc,IAAI,EAC1C,CAACO,EAAkBC,CAAmB,EAAIR,WAA2B,CACzE,YAAa,GACb,SAAU,KACV,UAAW,EACX,cAAe,CAAA,CAChB,EAEK,CAACS,EAAgBC,CAAiB,EAAIV,WAAS,CACnD,OAAQ,GACR,QAAS,GACT,OAAQ,EAAA,CACT,EAEK,CAACW,EAAkBC,CAAmB,EAAIZ,WAAS,CACvD,YAAa,GACb,WAAY,GACZ,YAAa,EAAA,CACd,EAEDa,EAAAA,UAAU,IAAM,CAEd,SAAS,MAAQ,qCAEjB,MAAMC,EAAkB,SAAS,cAAc,0BAA0B,EACrEA,GACFA,EAAgB,aAAa,UAAW,2EAA2E,EAIrH,MAAMC,EAAS,SAAS,cAAc,QAAQ,EAC9C,OAAAA,EAAO,KAAO,sBACdA,EAAO,YAAc,KAAK,UAAU,CAClC,WAAY,qBACZ,QAAS,UACT,KAAQ,gBACR,YAAe,4BACf,IAAO,+BACP,SAAY,CACV,QAAS,UACT,KAAQ,aACR,IAAO,qBAAyD,CAClE,CACD,EACD,SAAS,KAAK,YAAYA,CAAM,GAEd,SAAY,CAC5B,KAAM,CAAE,KAAM,CAAE,KAAAZ,CAAAA,GAAW,MAAMV,EAAS,KAAK,QAAA,EAG/C,GAFAW,EAAQD,CAAI,EAER,CAACA,EAAM,CACTP,EAAS,GAAG,EACZ,MACF,CAGA,KAAM,CAAE,KAAMoB,CAAA,EAAgB,MAAMvB,EACjC,KAAK,UAAU,EACf,OAAO,qBAAqB,EAC5B,GAAG,KAAMU,EAAK,EAAE,EAChB,OAAA,EAEH,GAAIa,IACFV,EAAWU,CAAW,EAElBA,EAAY,eAAe,CAC7B,MAAMC,EAAMD,EAAY,cACxBJ,EAAoB,CAClB,YAAaK,EAAI,cAAgB,GACjC,WAAYA,EAAI,aAAe,GAC/B,YAAaA,EAAI,cAAgB,EAAA,CAClC,EAEDP,EAAkB,CAChB,OAAQO,EAAI,gBAAkB,GAC9B,QAASA,EAAI,iBAAmB,GAChC,OAAQA,EAAI,gBAAkB,EAAA,CAC/B,EAGD,KAAM,CAAE,KAAMC,CAAA,EAAY,MAAMzB,EAC7B,KAAK,gBAAgB,EACrB,OAAO,MAAM,EACb,GAAG,kBAAmBwB,EAAI,EAAE,EAE/B,GAAIC,EAAS,CACX,MAAMC,EAAYD,EAAQ,UAAYE,EAAE,OAAS,MAAM,EAAE,OACnDC,EAAgBH,EAAQ,UAAYE,EAAE,OAAS,UAAU,EAAE,OAEjEZ,EAAoB,CAClB,YAAaW,EAAY,GAAKE,EAAgB,EAC9C,SAAUJ,EAAI,WAAa,IAAI,KAAKA,EAAI,UAAU,EAAE,eAAA,EAAmB,KACvE,UAAAE,EACA,cAAAE,CAAA,CACD,CACH,CACF,CAEJ,GAEA,EAEO,IAAM,CACX,MAAMC,EAAiB,SAAS,cAAc,oCAAoC,EAC9EA,GACF,SAAS,KAAK,YAAYA,CAAc,CAE5C,CACF,EAAG,CAAC1B,CAAQ,CAAC,EAEb,MAAM2B,EAAqB,MAAOC,GAAuB,CACvDA,EAAE,eAAA,EACFtB,EAAa,EAAI,EAEjB,GAAI,CACF,GAAI,CAACG,GAAS,cACZ,MAAM,IAAI,MAAM,mBAAmB,EAIrC,KAAM,CAAE,MAAAoB,GAAU,MAAMhC,EACrB,KAAK,eAAe,EACpB,OAAO,CACN,eAAgBgB,EAAe,OAC/B,gBAAiBA,EAAe,QAChC,eAAgBA,EAAe,OAC/B,WAAY,IAAI,KAAA,EAAO,YAAA,CAAY,CACpC,EACA,GAAG,KAAMJ,EAAQ,cAAc,EAAE,EAEpC,GAAIoB,EACF,MAAM,IAAI,MAAMA,EAAM,OAAO,EAI/B,MAAMC,EAAA,EAEN,MAAM,6BAA6B,CACrC,OAASD,EAAY,CACnB,MAAM,eAAeA,EAAM,OAAO,EAAE,CACtC,QAAA,CACEvB,EAAa,EAAK,CACpB,CACF,EAEMwB,EAAa,SAAY,CAC7BxB,EAAa,EAAI,EAEjB,GAAI,CACF,KAAM,CAAE,KAAM,CAAE,QAAAyB,CAAA,GAAc,MAAMlC,EAAS,KAAK,WAAA,EAClD,GAAI,CAACkC,EACH,MAAM,IAAI,MAAM,aAAa,EAG/B,MAAMC,EAAW,MAAM,MAAM,oEAAwE,CACnG,OAAQ,OACR,QAAS,CACP,eAAgB,mBAChB,cAAiB,UAAUD,EAAQ,YAAY,EAAA,CACjD,CACD,EAED,GAAI,CAACC,EAAS,GAAI,CAChB,MAAMC,EAAY,MAAMD,EAAS,KAAA,EACjC,MAAM,IAAI,MAAMC,EAAU,OAAS,cAAc,CACnD,CAEA,MAAMC,EAAS,MAAMF,EAAS,KAAA,EAE9BpB,EAAoB,CAClB,YAAa,GACb,SAAU,IAAI,KAAA,EAAO,eAAA,EACrB,UAAWsB,EAAO,UAClB,cAAeA,EAAO,aAAA,CACvB,EAED,MAAM,uBAAuB,CAC/B,OAASL,EAAY,CACnB,MAAM,gBAAgBA,EAAM,OAAO,EAAE,CACvC,QAAA,CACEvB,EAAa,EAAK,CACpB,CACF,EAEM6B,EAA2B,MAAOP,GAAuB,CAC7DA,EAAE,eAAA,EAEF,GAAI,CACF,GAAI,CAACnB,GAAS,cACZ,MAAM,IAAI,MAAM,mBAAmB,EAGrC,KAAM,CAAE,MAAAoB,GAAU,MAAMhC,EACrB,KAAK,eAAe,EACpB,OAAO,CACN,aAAckB,EAAiB,YAC/B,YAAaA,EAAiB,WAC9B,aAAcA,EAAiB,YAC/B,WAAY,IAAI,KAAA,EAAO,YAAA,CAAY,CACpC,EACA,GAAG,KAAMN,EAAQ,cAAc,EAAE,EAEpC,GAAIoB,EACF,MAAM,IAAI,MAAMA,EAAM,OAAO,EAG/B,MAAM,iBAAiB,CACzB,OAASA,EAAY,CACnB,MAAM,eAAeA,EAAM,OAAO,EAAE,CACtC,CACF,EAEA,OAAKtB,EAYH6B,EAAAA,KAAC,MAAA,CAAI,UAAU,0BAEb,SAAA,CAAAC,MAAC,SAAA,CAAO,UAAU,8BAChB,SAAAA,EAAAA,IAAC,OAAI,UAAU,yCACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,yCACb,gBAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMrC,EAAS,YAAY,EACpC,UAAU,mDAEV,SAAAqC,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,CAAA,CAAA,QAE3C,KAAA,CAAG,UAAU,sCAAsC,SAAA,KAAE,CAAA,EACxD,CAAA,CACF,CAAA,CACF,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8CAEb,SAAA,OAAC,MAAA,CAAI,UAAU,OACb,SAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,2BACb,SAAAD,OAAC,MAAA,CAAI,UAAU,wBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMlC,EAAa,QAAQ,EACpC,UAAW,6EACTD,IAAc,SACV,gCACA,4EACN,GACD,SAAA,SAAA,CAAA,EAGDmC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMlC,EAAa,cAAc,EAC1C,UAAW,6EACTD,IAAc,eACV,gCACA,4EACN,GACD,SAAA,OAAA,CAAA,EAGDmC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMlC,EAAa,OAAO,EACnC,UAAW,6EACTD,IAAc,QACV,gCACA,4EACN,GACD,SAAA,QAAA,CAAA,CAED,CAAA,CACF,CAAA,CACF,EACF,EAGCA,IAAc,UACbkC,OAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,2CACb,SAAA,OAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,QAAK,EAC9DA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAW,wBAAwB1B,EAAiB,YAAc,eAAiB,YAAY,GAAI,EACxG0B,EAAAA,IAAC,OAAA,CAAK,UAAW,eAAe1B,EAAiB,YAAc,iBAAmB,cAAc,GAC7F,SAAAA,EAAiB,YAAc,MAAQ,QAC1C,CAAA,EACF,EACCA,EAAiB,aAChB0B,EAAAA,IAAC,SAAA,CACC,QAASP,EACT,SAAUzB,EACV,UAAU,qHAET,WAAY,UAAY,SAAA,CAAA,CAC3B,EAEJ,EAECM,EAAiB,aAChByB,OAAC,MAAA,CAAI,UAAU,6CACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,OAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,UAAO,EAC5CC,EAAAA,IAAC,IAAA,CAAE,UAAU,4BAA6B,WAAiB,SAAS,CAAA,EACtE,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,OAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,OAAI,EACzCA,EAAAA,KAAC,IAAA,CAAE,UAAU,4BAA6B,SAAA,CAAAzB,EAAiB,UAAU,eAAA,EAAiB,GAAA,EAAC,CAAA,EACzF,EACAyB,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,OAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,QAAK,EAC1CA,EAAAA,KAAC,IAAA,CAAE,UAAU,4BAA6B,SAAA,CAAAzB,EAAiB,cAAc,GAAA,EAAC,CAAA,EAC5E,CAAA,EACF,CAAA,EAEJ,EAGAyB,EAAAA,KAAC,MAAA,CAAI,UAAU,2CACb,SAAA,OAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,cAAW,SACnE,OAAA,CAAK,SAAUT,EAAoB,UAAU,YAC5C,SAAA,CAAAS,OAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,CAAA,iBACrD,OAAA,CAAK,UAAU,eAAe,SAAA,IAAC,CAAA,EAC1C,EACAC,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOxB,EAAe,OACtB,SAAWe,GAAMd,EAAkBwB,IAAS,CAAE,GAAGA,EAAM,OAAQV,EAAE,OAAO,OAAQ,EAChF,YAAY,YACZ,UAAU,kIACV,SAAQ,EAAA,CAAA,CACV,EACF,SAEC,MAAA,CACC,SAAA,CAAAQ,EAAAA,KAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,CAAA,0BAC5C,OAAA,CAAK,UAAU,eAAe,SAAA,IAAC,CAAA,EACnD,EACAC,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOxB,EAAe,QACtB,SAAWe,GAAMd,EAAkBwB,IAAS,CAAE,GAAGA,EAAM,QAASV,EAAE,OAAO,OAAQ,EACjF,YAAY,YACZ,UAAU,kIACV,SAAQ,EAAA,CAAA,CACV,EACF,SAEC,MAAA,CACC,SAAA,CAAAQ,EAAAA,KAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,CAAA,eACvD,OAAA,CAAK,UAAU,eAAe,SAAA,IAAC,CAAA,EACxC,EACAC,EAAAA,IAAC,QAAA,CACC,KAAK,WACL,MAAOxB,EAAe,OACtB,SAAWe,GAAMd,EAAkBwB,IAAS,CAAE,GAAGA,EAAM,OAAQV,EAAE,OAAO,OAAQ,EAChF,YAAY,2BACZ,UAAU,kIACV,SAAQ,EAAA,CAAA,CACV,EACF,QAEC,MAAA,CAAI,UAAU,mDACb,SAAAQ,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,wDAAwD,EACrED,EAAAA,KAAC,MAAA,CAAI,UAAU,wBACb,SAAA,OAAC,IAAA,CAAE,UAAU,mBAAmB,SAAA,eAAY,EAC5CA,EAAAA,KAAC,KAAA,CAAG,UAAU,qCACZ,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,eAAY,EAChBA,EAAAA,IAAC,MAAG,SAAA,8BAAiC,EACrCA,EAAAA,IAAC,MAAG,SAAA,mBAAgB,CAAA,EACtB,CAAA,EACF,CAAA,CAAA,CACF,CAAA,CACF,EAEAA,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,SAAUhC,EACV,UAAU,4HAET,WAAY,cAAgB,aAAA,CAAA,CAC/B,EACF,CAAA,EACF,CAAA,EACF,EAIDH,IAAc,gBACbkC,OAAC,MAAA,CAAI,UAAU,2CACb,SAAA,OAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,QAAK,SAC7D,OAAA,CAAK,SAAUD,EAA0B,UAAU,YAClD,SAAA,CAAAC,OAAC,MAAA,CACC,SAAA,OAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,MAAG,EACnEC,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOtB,EAAiB,YACxB,SAAWa,GAAMZ,EAAoBsB,IAAS,CAAE,GAAGA,EAAM,YAAaV,EAAE,OAAO,OAAQ,EACvF,UAAU,iIAAA,CAAA,CACZ,EACF,SAEC,MAAA,CACC,SAAA,OAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,UAAO,EACvES,EAAAA,IAAC,QAAA,CACC,KAAK,QACL,MAAOtB,EAAiB,WACxB,SAAWa,GAAMZ,EAAoBsB,IAAS,CAAE,GAAGA,EAAM,WAAYV,EAAE,OAAO,OAAQ,EACtF,UAAU,iIAAA,CAAA,CACZ,EACF,SAEC,MAAA,CACC,SAAA,OAAC,QAAA,CAAM,UAAU,+CAA+C,SAAA,MAAG,EACnES,EAAAA,IAAC,QAAA,CACC,KAAK,MACL,MAAOtB,EAAiB,YACxB,SAAWa,GAAMZ,EAAoBsB,IAAS,CAAE,GAAGA,EAAM,YAAaV,EAAE,OAAO,OAAQ,EACvF,UAAU,iIAAA,CAAA,CACZ,EACF,EAEAS,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,UAAU,iGACX,SAAA,IAAA,CAAA,CAED,EACF,CAAA,EACF,EAIDnC,IAAc,SACbkC,OAAC,MAAA,CAAI,UAAU,2CACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,OAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,SAAM,QACzD,SAAA,CAAO,UAAU,iGAAiG,SAAA,SAEnH,CAAA,EACF,EAEAC,EAAAA,IAAC,OAAI,UAAU,YACZ,YACCD,EAAAA,KAAC,MAAA,CAAI,UAAU,0EACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,sEACb,eAAC,IAAA,CAAE,UAAU,4BAAA,CAA6B,EAC5C,SACC,MAAA,CACC,SAAA,CAAAA,MAAC,IAAA,CAAE,UAAU,4BAA6B,SAAA5B,EAAQ,WAAa,MAAM,EACrE4B,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAyB,WAAQ,MAAM,CAAA,EACtD,CAAA,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,OAAC,OAAA,CAAK,UAAW,kCACf3B,EAAQ,OAAS,QACb,8BACA,2BACN,GACG,SAAAA,EAAQ,OAAS,QAAU,MAAQ,KACtC,EACA4B,EAAAA,IAAC,UAAO,UAAU,mDAChB,eAAC,IAAA,CAAE,UAAU,gBAAA,CAAiB,EAChC,CAAA,EACF,CAAA,CAAA,CACF,CAAA,CAEJ,CAAA,EACF,CAAA,EAEJ,CAAA,EACF,QA1QG,MAAA,CAAI,UAAU,2DACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,8EAA8E,QAC5F,IAAA,CAAE,UAAU,gBAAgB,SAAA,cAAW,CAAA,CAAA,CAC1C,CAAA,CACF,CAuQN"}