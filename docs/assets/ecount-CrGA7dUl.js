import{b as p,u as y,r,j as e}from"./index-TUPhGR7w.js";function w(){const{user:j,ecountConnection:s,testEcountConnection:g,loading:d}=p(),m=y(),[t,f]=r.useState({companyCode:s?.company_code||"",ecountUserId:s?.ecount_user_id||""}),[x,o]=r.useState(!1),[a,n]=r.useState(null),[u,i]=r.useState("");if(!d&&!j)return m("/auth/login"),null;const h=l=>{f({...t,[l.target.name]:l.target.value}),i(""),n(null)},b=async l=>{l.preventDefault(),o(!0),i(""),n(null);try{const c=await g(t.companyCode,t.ecountUserId);n(c)}catch(c){i(c.message||"Ecount 연결 테스트 중 오류가 발생했습니다.")}finally{o(!1)}},N=l=>{switch(l){case"connected":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx("i",{className:"ri-check-line mr-1"}),"연결됨"]});case"error":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx("i",{className:"ri-close-line mr-1"}),"연결 실패"]});default:return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[e.jsx("i",{className:"ri-link-unlink mr-1"}),"연결 안됨"]})}};return d?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"bg-white shadow rounded-lg mb-6",children:e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Ecount 연결 설정"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Ecount ERP 시스템과 연결하여 주문 및 판매 데이터를 동기화하세요"})]}),e.jsxs("button",{onClick:()=>m("/dashboard"),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 whitespace-nowrap",children:[e.jsx("i",{className:"ri-arrow-left-line mr-2"}),"대시보드로 돌아가기"]})]})})}),s&&e.jsx("div",{className:"bg-white shadow rounded-lg mb-6",children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"현재 연결 상태"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"상태"}),e.jsx("div",{className:"mt-1",children:N(s.status)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"회사코드"}),e.jsx("div",{className:"mt-1 text-sm text-gray-900",children:s.company_code})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"사용자 ID"}),e.jsx("div",{className:"mt-1 text-sm text-gray-900",children:s.ecount_user_id})]})]}),s.masked_api_key_suffix&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"API 키"}),e.jsxs("div",{className:"mt-1 text-sm text-gray-600",children:[e.jsx("i",{className:"ri-shield-check-line mr-1"}),"운영팀이 Secrets에 보관했습니다 (끝자리: ****",s.masked_api_key_suffix,")"]})]})]})}),e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Ecount 연결 마법사"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Ecount ERP 시스템 연결을 위한 정보를 입력하고 테스트하세요"})]}),e.jsxs("form",{onSubmit:b,className:"px-6 py-4 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"flex items-center justify-center w-6 h-6 bg-blue-600 text-white rounded-full text-xs font-medium mr-3",children:"1"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"회사코드 입력"})]}),e.jsxs("div",{className:"ml-9",children:[e.jsx("label",{htmlFor:"companyCode",className:"block text-sm font-medium text-gray-700",children:"회사코드"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{type:"text",id:"companyCode",name:"companyCode",value:t.companyCode,onChange:h,placeholder:"예: 669606",className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0})}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Ecount에서 제공받은 회사코드를 입력하세요"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"flex items-center justify-center w-6 h-6 bg-blue-600 text-white rounded-full text-xs font-medium mr-3",children:"2"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Ecount 사용자 ID 입력"})]}),e.jsxs("div",{className:"ml-9",children:[e.jsx("label",{htmlFor:"ecountUserId",className:"block text-sm font-medium text-gray-700",children:"Ecount 사용자 ID"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{type:"text",id:"ecountUserId",name:"ecountUserId",value:t.ecountUserId,onChange:h,placeholder:"예: EUNYUL0331",className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0})}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Ecount 시스템에 로그인할 때 사용하는 사용자 ID를 입력하세요"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"flex items-center justify-center w-6 h-6 bg-blue-600 text-white rounded-full text-xs font-medium mr-3",children:"3"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"API Key 보관 안내"})]}),e.jsx("div",{className:"ml-9",children:e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("i",{className:"ri-information-line text-blue-400 text-lg"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-800",children:"보안 정책"}),e.jsxs("div",{className:"mt-2 text-sm text-blue-700",children:[e.jsx("p",{children:"API 키는 보안상 화면에 입력하지 않습니다."}),e.jsx("p",{className:"mt-1",children:"운영팀이 안전하게 Secrets에 보관하고 있습니다."}),s?.masked_api_key_suffix&&e.jsxs("p",{className:"mt-1 font-medium",children:["현재 등록된 키: ****",s.masked_api_key_suffix]})]})]})]})})})]}),u&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md text-sm",children:e.jsxs("div",{className:"flex",children:[e.jsx("i",{className:"ri-error-warning-line mr-2 mt-0.5"}),e.jsx("div",{children:u})]})}),a?.success&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-600 px-4 py-3 rounded-md text-sm",children:e.jsxs("div",{className:"flex",children:[e.jsx("i",{className:"ri-check-line mr-2 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.message}),e.jsxs("p",{className:"mt-1 text-xs",children:["추적 ID: ",a.trace_id]})]})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"flex items-center justify-center w-6 h-6 bg-blue-600 text-white rounded-full text-xs font-medium mr-3",children:"4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"연결 테스트"})]}),e.jsxs("div",{className:"ml-9",children:[e.jsx("button",{type:"submit",disabled:x||!t.companyCode||!t.ecountUserId,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"연결 테스트 중..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-plug-line mr-2"}),"연결 테스트"]})}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"입력한 정보로 Ecount 시스템에 연결을 시도합니다"})]})]})]})]}),e.jsx("div",{className:"mt-6 bg-white shadow rounded-lg",children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"도움말"}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("i",{className:"ri-question-line mr-2 mt-0.5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("strong",{children:"회사코드를 모르겠어요"}),e.jsx("p",{children:"Ecount 관리자에게 문의하거나 Ecount 로그인 화면에서 확인할 수 있습니다."})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("i",{className:"ri-question-line mr-2 mt-0.5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("strong",{children:"연결 테스트가 실패해요"}),e.jsx("p",{children:"회사코드와 사용자 ID가 정확한지 확인하고, Ecount 계정이 활성화되어 있는지 확인하세요."})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("i",{className:"ri-question-line mr-2 mt-0.5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("strong",{children:"API 키는 어떻게 관리되나요?"}),e.jsx("p",{children:"보안을 위해 API 키는 서버의 안전한 저장소에 보관되며, 화면에 노출되지 않습니다."})]})]})]})]})})]})})}export{w as default};
//# sourceMappingURL=ecount-CrGA7dUl.js.map
